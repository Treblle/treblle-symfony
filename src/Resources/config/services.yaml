services:
  _defaults:
    autowire: true
    autoconfigure: true

  treblle-client:
    class: GuzzleHttp\Client

  Treblle\Treblle:
    factory: [ Treblle\Symfony\DependencyInjection\TreblleFactory, 'createTreblle' ]
    arguments:
      $client: '@treblle-client'

  Treblle\Symfony\DataProvider: ~
  Treblle\Symfony\EventSubscriber\TreblleEventSubscriber: ~
  Treblle\Php\InMemoryErrorDataProvider: ~
  Treblle\Php\PhpLanguageDataProvider: ~
  Treblle\Php\SuperGlobalsServerDataProvider: ~

  Treblle\Php\Contract\ErrorDataProvider: '@Treblle\Php\InMemoryErrorDataProvider'
  Treblle\Php\Contract\LanguageDataProvider: '@Treblle\Php\PhpLanguageDataProvider'
  Treblle\Php\Contract\RequestDataProvider: '@Treblle\Symfony\DataProvider'
  Treblle\Php\Contract\ResponseDataProvider: '@Treblle\Symfony\DataProvider'
  Treblle\Php\Contract\ServerDataProvider: '@Treblle\Php\SuperGlobalsServerDataProvider'
